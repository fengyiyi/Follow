/*
	Name:Javascript Follow Plugin
	Link:https://github.com/liutian1937/Follow
	Website:http://www.niumowang.org
	Author:ok8008@yeah.net
*/
(function(){var e=function(a){var b=this;b.objArr=a.obj;b.arrLen=b.objArr.length;b.obj=b.objArr[0];b.bottomHeight=a.bottom;b.mTop=parseInt(b.getStyle(b.obj,'marginTop'));b.posX=b.position(b.obj)['x'];b.posY=b.position(b.obj)['y'];b.bodyHeight=document.documentElement.scrollHeight;b.sawHeight=document.documentElement.clientHeight;b.minusHeight=b.bodyHeight-b.sawHeight-b.bottomHeight;b.newWrap=null;b.newWrapHeight=null;b.addEventCheck(window,'scroll',function(){b.action()});b.addEventCheck(window,'resize',function(){b.reset()})};e.prototype={addEventCheck:function(a,b,c){if(a.addEventListener){a.addEventListener(b,c,false)}else if(a.attachEvent){a.attachEvent('on'+b,c)}},position:function(a){var b=this;return a.offsetParent?{x:(a.offsetLeft+b.position(a.offsetParent)['x']),y:(a.offsetTop+b.position(a.offsetParent)['y'])}:{x:a.offsetLeft,y:a.offsetTop}},action:function(){var a=this;var b=document.body.scrollTop+document.documentElement.scrollTop;if(b+a.mTop>a.posY){a.fixedFn();if(a.newWrap&&b+a.bottomHeight+a.newWrapHeight>a.bodyHeight){var c=b+a.bottomHeight+a.newWrapHeight-a.bodyHeight;if(a.sawHeight>a.newWrapHeight){c+=a.sawHeight-a.newWrapHeight}else{c=0;if(b>a.minusHeight){c=b-a.minusHeight}};a.setStyle(a.newWrap,{'bottom':c+'px','top':'auto'})}}else{a.showObj(a.objArr);if(a.newWrap){a.hideObj(a.newWrap)}}},fixedFn:function(){var a=this;if(a.newWrap){a.setStyle(a.newWrap,{'bottom':'auto','top':'0px'});a.hideObj(a.objArr);a.showObj(a.newWrap)}else{a.newWrap=document.createElement('div');var b=null;for(var c=0;c<a.arrLen;c++){b=a.objArr[c].cloneNode(true);b.setAttribute('id','');a.newWrap.appendChild(b)};a.setStyle(a.newWrap,{'position':'fixed','left':a.posX+'px','top':'0px','bottom':'auto'});a.obj.parentNode.appendChild(a.newWrap);a.newWrapHeight=a.newWrap.offsetHeight}},hideObj:function(a){var b=this;if(b.isArray(a)){var c=a.length;for(var d=0;d<c;d++){a[d].style.display='none'}}else{a.style.display='none'}},showObj:function(a){var b=this;if(b.isArray(a)){var c=a.length;for(var d=0;d<c;d++){a[d].style.display='block'}}else{a.style.display='block'}},isArray:function(a){return Object.prototype.toString.call(a)==='[object Array]'},getStyle:function(a,b){if(a.currentStyle){return a.currentStyle[b]}else{return document.defaultView.getComputedStyle(a,null)[b]}},setStyle:function(a,b){for(var c in b){a.style[c]=b[c]}},reset:function(){var a=this;a.showObj(a.objArr);a.posX=a.position(a.obj)['x'];a.posY=a.position(a.obj)['y'];a.sawHeight=document.documentElement.clientHeight;a.minusHeight=a.bodyHeight-a.sawHeight-a.bottomHeight;if(a.newWrap){a.setStyle(a.newWrap,{'left':a.posX+'px'})}a.action()}};window.Follow=e}());